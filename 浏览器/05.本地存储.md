# 本地存储

## Cookie

`Cookie` 是服务器保存在浏览器的一小段文本信息，每个 Cookie 的大小一般不能超过 4KB

可以通过 `Cookie` 来向访问者电脑上存储数据，或者某些网站为了辨别用户身份、进行 session 跟踪而储存在用户本地终端上的数据

存储在 `Cookie` 中的数据，每次都会被浏览器自动放在 http 请求中，如果这些数据并不是每个请求都需要发给服务端的数据，浏览器这设置自动处理无疑增加了网络开销

如果这些数据是每个请求都需要发给服务端的数据（比如身份认证信息），浏览器这设置自动处理就大大免去了重复添加操作。所以对于那种“每次请求都要携带的信息（最典型的就是身份认证信息）”就特别适合放在 `Cookie` 中

特征：

+ `Cookie` 的存储是以域名形式进行区分的，不同的域下存储的 `Cookie` 是独立的
+ 我们能够操作的 `Cookie` 是当前域以及当前域下的所有子域
+ 一个域名下存放的 `Cookie` 的个数是有限制的，不同的浏览器存放的个数不一样,一般为20个，大小一般为 4KB
+ `Cookie` 也可以设置过期的时间，默认是会话结束的时候，当时间到期自动销毁

`Cookie` 主要用于以下三个方面：

+ 会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）
+ 个性化设置（如用户自定义设置、主题等）
+ 浏览器行为跟踪（如跟踪分析用户行为等）

客户端设置：

```js
document.cookie = '名字=值';
//在设置属性时，属性之间由一个分号和一个空格隔开。
document.cookie = 'username=leo; domain=baike.baidu.com'  //并且设置了生效域

//当我们需要设置多个cookie时
document.cookie = "name=Jonh";
document.cookie = "age=12";
document.cookie = "class=111";
```

客户端可以设置 `Cookie` 下列选项：

+ expires 过期时间
+ domain 服务器域名
+ path 域名下的哪些路径可以接受 Cookie
+ secure 有条件：只有在 https 协议的网页中，客户端设置 secure 类型的 cookie 才能成功），但无法设置 HttpOnly 选项

## LocalStorage

HTML5 新的 API

特点：

+ 生命周期：持久化的本地存储，除非主动删除数据，否则数据是永远不会过期
+ 存储的信息在同一域中是共享的
+ 当本页操作（新增、修改、删除）了localStorage 的时候，本页面不会触发 storage 事件,但是别的页面会触发 storage 事件
+ 大小跟浏览器有关，一般是5M
+ localStorage 受同源策略的限制

Storage 方法：

```js
// 设置
localStorage.setItem('username','leo')
// 读取
localStorage.getItem('username')
// 删除
localStorage.removeItem('username')
// 全部清除
localStorage.clear()
```

当 storage 发生改变的时候触发， storage 事件

## SessionStorage

跟 LocalStorage 差不多，也是本地存储，会话本地存储

特点：

用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问并且当会话结束后数据也随之销毁。

SessionStorage 不是一种持久化的本地存储，仅仅是会话级别的存储，关闭窗口后，SessionStorage 即被销毁

新窗口打开同源的另一个页面 SsessionStorage 也是没有的
